{
  "$schema": "http://json-schema.org/schema#",
  "id": "https://github.com/PixnBits/multiplanetary-data/blob/feature/data-modeling/__tests__/schema/mission.json",
  "title": "Mission",
  "type": "object",
  "properties": {
    "sources": {
      "type": "array",
      "items": {
        "type": "string",
        "format": "uri"
      },
      "minItems": 1
    },
    "patches": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "vendor": {
            "type": "string"
          },
          "href": {
            "type": "string"
          }
        }
      }
    },
    "hardware": {
      "type": "array",
      "items": {
        "anyOf": [
          {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "booster",
                  "payload",
                  "fairing"
                ]
              },
              "vendor": {
                "type": "string"
              },
              "name": {
                "type": "string"
              },
              "id": {
                "type": "string"
              }
            }
          },
          {
            "type": "object",
            "properties": {
              "NSSDCA": {
                "type": "string"
              },
              "discipline": {
                "type": "string"
              }
            }
          }
        ]
      }
    },
    "events": {
      "type": "array",
      "items": {
        "properties": {
          "type": {
            "type": "string"
          }
        },
        "oneOf": [
          {
            "type": "object",
            "properties": {
              "type": {
                "enum": [
                  "launch"
                ]
              },
              "window": {
                "type": "object",
                "properties": {
                  "opens": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "duration": {
                    "type": "string",
                    "regex": "/^P(([0-9]+Y)?([0-9]+M)?([0-9]+D)?|([0-9]+W))(T([0-9]+H)?([0-9]+M)?([0-9]+S)?)?$/"
                  },
                  "closes": {
                    "type": "string",
                    "format": "date-time"
                  }
                }
              },
              "location": {
                "type": "object",
                "properties": {
                  "pad": {
                    "type": "string"
                  },
                  "campus": {
                    "type": "string"
                  },
                  "href": {
                    "type": "string",
                    "format": "uri"
                  }
                }
              },
              "result": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string"
                  },
                  "when": {
                    "type": "string",
                    "format": "date-time"
                  }
                },
                "oneOf": [
                  {
                    "properties": {
                      "type": {
                        "enum": [
                          "scrub"
                        ]
                      },
                      "reason": {
                        "type": "string"
                      },
                      "description": {
                        "type": "string"
                      }
                    }
                  },
                  {
                    "properties": {
                      "type": {
                        "enum": [
                          "success"
                        ]
                      }
                    }
                  }
                ]
              }
            }
          },
          {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "separation"
                ]
              }
            }
          },
          {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "payload"
                ]
              }
            }
          }
        ]
      }
    }
  },
  "required": [
    "sources",
    "hardware"
  ]
}
